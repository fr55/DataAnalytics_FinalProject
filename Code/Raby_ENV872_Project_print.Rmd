---
output: 
  pdf_document:
    keep_tex: yes
    fig_caption: yes
    number_sections: yes
geometry: margin=2.54cm
title: Analysis of the effect of PM10 Concentration, Temperature, Geographic Location, Population, and distance to Electricity-Generation Combustion Points on the concentration of fine particulate matter (PM2.5) in North Carolina during the year 2018.
subtitle: https://github.com/fr55/DataAnalytics_FinalProject
author: Felipe Raby Amadori
abstract: "Experimental overview. This section should be no longer than 250 words."
fontsize: 12pt
mainfont: Times New Roman
editor_options: 
  chunk_output_type: console
---

<Information in these brackets are used for annotating the R Markdown file. They will not appear in the final version of the PDF document>

\newpage
\tableofcontents 
\newpage
\listoftables 
\newpage
\listoffigures 
\newpage

<Setup the global options for the R chunks in your document>

<Setup autoreferencing for figures and tables in your document>

```{r setup, include=FALSE}
knitr::opts_chunk$set(message = FALSE, warning = FALSE, fig.path = './Output')
# Set your working directory

setwd("C:/Users/Felipe/OneDrive - Duke University/1. DUKE/1. Ramos 2 Semestre/EOS-872 Env. Data Analytics/DataAnalytics_FinalProject")

# Load your packages

library(FSA)
library(tidyverse)
library(RColorBrewer)
library(ggpubr)
library(viridis)
library(colormap)
library(leaflet)
library(sf)
library(tidyverse)
library(ggspatial)
library(mapview)
library(rvest)
library(dplyr)
library(FedData)
library(tiff)
library(gridExtra)
library(elevatr)
library(xtable)
library(car)

# Set your ggplot theme

felipe_theme <- theme_light(base_size = 12) +
  theme(axis.text = element_text(color = "grey8"), 
        legend.position = "right", plot.title = element_text(hjust = 0.5)) 
theme_set(felipe_theme)

```


# Research Question and Rationale

<Paragraph detailing the rationale for your analysis. What is the significant application and/or interest in this topic? Connect to environmental topic(s)/challenge(s).>

Nowadays air pollution is one of the most relevant health issues in the world. It refers to the contamination of the air by chemicals, biological materials, and other types of pollutants that are harmful to human health. To solve the problem of air pollution, it's necessary to understand the problem, what are the causes, and search for solutions based on the findings.

Particulate matter with a diameter of less than 2.5 micrometers is called PM2.5, and it is a extremely harmful air pollutant because it consists of particles with diameters that are less than or equal to 2.5 microns in size, which can get deeply into the lung, and ultimately impair lung function.  

<Paragraph detailing your research question(s) and goals. What do you want to find out? Include a sentence (or a few) on the dataset you are using to answer this question - just enough to give your reader an idea of where you are going with the analysis.>

This study focus on trying to understand how PM2.5 concentration in North Carolina vary with temperature, PM10 concentration, zoning (piedmont, coastal, mountain), population, elevation, and distance to combustion points for electricity generation. This last variable was included because according to the EPA combustion for electricity generation is the major point-source sector for PM2.5 in the USA (EPA, 2019).

The research question is: What are the effects of temperature, PM10 concentration, zoning (piedmont, coastal, mountain), population, elevation, distance to combustion points for electricity generation, in PM2.5 concentrations within North Carolina in the year 2018? 

\newpage

# Dataset Information

<Information on how the dataset for this analysis were collected, the data contained in the dataset, and any important pieces of information that are relevant to your analyses. This section should contain much of same information as the README file for the dataset but formatted in a way that is more narrative.>

For the analysis the following datasets were considered:

## EPA PM2.5 Dataset

This dataset contains data from air quality monitoring of PM2.5 in North Carolina in 2018, and it was obtained using the Download Daily Data Tool in the United States Environmental Protection Agency (EPA) webpage https://www.epa.gov/outdoor-air-quality-data/download-daily-data where the options showed in Table \ref{tab:tab1} were selected:

```{r echo=FALSE, results="asis"}
#Creating Table
a <- data.frame("Option" = "Pollutant", "Selection" = "PM2.5")
b <- data.frame("Option" = "Year", "Selection" = "2018")
c <- data.frame("Option" = "Geographic Area", "Selection" = "North Carolina")
d <- data.frame("Option" = "Monitor Site", "Selection" = "All Sites")
e <- data.frame("Option" = "Download", "Selection" = "Download CSV (spreadsheet)")

summary_table <- rbind(a, b, c, d, e)

xtable1 <- xtable(summary_table, label="tab:tab1", caption="Selections")
print.xtable(xtable1, comment=FALSE, include.rownames=FALSE)
```

The downloaded file was saved in the project folder path ./Data/Raw/ as EPAair_PM25_NC2018_raw.csv on 2019-03-31.

### Data Content Information

The dataset contains daily mean PM2.5 concentration in ug/m3 in 2018. Data from 24 stations in 21 different counties of North Carolina with their location in NAD83 lat/long coordinates.

The dataset contains 19 columns, which are shown in Table \ref{tab:tab3}. Column names without description are self-explanatory.

```{r echo=FALSE, results="asis"}
#Creating Table
a <- data.frame("Column" = "Date", "Description" = "mm/dd/YY")
b <- data.frame("Column" = "Source", "Description" = "AQS (Air Quality System)")
c <- data.frame("Column" = "Site ID", "Description" = "A unique number identifying the site.")
d <- data.frame("Column" = "POC", "Description" = "“Parameter Occurrence Code”, distinguishes different instruments that measure the same parameter at the same site.")
e <- data.frame("Column" = "Daily Mean PM2.5 Concentration", "Description" = "")
f <- data.frame("Column" = "Units", "Description" = "Concentration Units")
t <- data.frame("Column" = "DAILY_AQI_VALUE", "Description" = "AQI = Air quality index")
h <- data.frame("Column" = "Site Name", "Description" = "")
i <- data.frame("Column" = "DAILY_OBS_COUNT", "Description" = "")
j <- data.frame("Column" = "PERCENT_COMPLETE", "Description" = "")
k <- data.frame("Column" = "AQS_PARAMETER_CODE", "Description" = "")
l <- data.frame("Column" = "AQS_PARAMETER_DESC", "Description" = "")
m <- data.frame("Column" = "CBSA_CODE", "Description" = "")
n <- data.frame("Column" = "CBSA_NAME", "Description" = "")
o <- data.frame("Column" = "STATE_CODE", "Description" = "")
g <- data.frame("Column" = "STATE", "Description" = "")
p <- data.frame("Column" = "COUNTY CODE", "Description" = "A unique number identifying the County.")
q <- data.frame("Column" = "COUNTY", "Description" = "")
r <- data.frame("Column" = "SITE_LATITUDE", "Description" = "NAD83")
s <- data.frame("Column" = "SITE_LONGITUDE", "Description" = "NAD83")

summary_table <- rbind(a, b, c, d, e, f, t, h, i, j, k, l, m, n, o, p, q, r, s)

xtable1 <- xtable(summary_table, label="tab:tab3", caption="Dataset content")
align(xtable1) <- "lp{2.5in}p{3.5in}"
print.xtable(xtable1, comment=FALSE, include.rownames=FALSE)
```

## EPA PM10 Dataset

This dataset contains data from air quality monitoring of PM10 in North Carolina in 2018, and it was obtained using the Download Daily Data Tool in the United States Environmental Protection Agency (EPA) webpage https://www.epa.gov/outdoor-air-quality-data/download-daily-data where the options showed in Table \ref{tab:tab4} were selected:

```{r echo=FALSE, results="asis"}
#Creating Table
a <- data.frame("Option" = "Pollutant", "Selection" = "PM10")
b <- data.frame("Option" = "Year", "Selection" = "2018")
c <- data.frame("Option" = "Geographic Area", "Selection" = "North Carolina")
d <- data.frame("Option" = "Monitor Site", "Selection" = "All Sites")
e <- data.frame("Option" = "Download", "Selection" = "Download CSV (spreadsheet)")

summary_table <- rbind(a, b, c, d, e)

xtable1 <- xtable(summary_table, label="tab:tab4", caption="Selections")
print.xtable(xtable1, comment=FALSE, include.rownames=FALSE)
```

